<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeBite - Pagar</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.png" type="image/png">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <img src="logo.png" alt="HomeBite Logo">
                <h1>HomeBite</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html" data-translate-key="Inicio">Inicio</a></li>
                    <li><a href="map.html" data-translate-key="Cooks Map">Cooks Map</a></li>
                    <li><a href="reviews.html" data-translate-key="Reseñas">Reseñas</a></li>
                    <li><a href="profile.html" data-translate-key="Cooks Profile">Cooks Profile</a></li>
                    <li><a href="login.html" data-translate-key="Iniciar Sesión">Iniciar Sesión</a></li>
                    <li><a href="register.html" class="button" data-translate-key="Regístrate">Regístrate</a></li>
                    <li><a href="checkout.html" class="active" data-translate-key="Pagar">Pagar</a></li>
                </ul>
                <button id="languageToggle" class="button language-toggle">ES / EN</button>
            </nav>
        </div>
    </header>

    <main class="checkout-page-main">
        <div class="container checkout-container">
            <h2 id="checkoutTitle">Tu Pedido</h2>

            <div class="order-summary">
                <h3 id="summaryTitle">Resumen del Pedido</h3>
                <div class="order-item">
                    <span id="item1Name">Lasaña Casera (x1)</span>
                    <span class="item-price">$12.50</span>
                </div>
                <div class="order-item">
                    <span id="item2Name">Tacos al Pastor (x2)</span>
                    <span class="item-price">$20.00</span>
                </div>
                <div class="order-total">
                    <span id="totalText">Total:</span>
                    <span class="total-price">$32.50</span>
                </div>
            </div>

            <section class="payment-details">
                <h3 id="paymentTitle">Detalles de Pago</h3>
                <form id="paymentForm">
                    <div class="form-group">
                        <label for="card-name" id="cardNameLabel">Nombre en la Tarjeta:</label>
                        <input type="text" id="card-name" class="input-field" placeholder="Nombre Apellido" required>
                    </div>
                    <div class="form-group">
                        <label for="card-number" id="cardNumberLabel">Número de Tarjeta:</label>
                        <input type="text" id="card-number" class="input-field" placeholder="XXXX XXXX XXXX XXXX" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="expiry-date" id="expiryDateLabel">Fecha de Vencimiento:</label>
                            <input type="text" id="expiry-date" class="input-field" placeholder="MM/AA" required>
                        </div>
                        <div class="form-group">
                            <label for="cvv" id="cvvLabel">CVV:</label>
                            <input type="text" id="cvv" class="input-field" placeholder="XXX" required>
                        </div>
                    </div>
                    <button type="submit" class="button" id="payButton">Pagar Ahora</button>
                    <div id="payment-message" class="form-message"></div>
                </form>
            </section>

            <a href="index.html" class="button button-secondary back-button" id="backToHomeButton">Volver al Inicio</a>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 HomeBite. Todos los derechos reservados.</p>
            <ul>
                <li><a href="#" data-translate-key="Privacidad">Privacidad</a></li>
                <li><a href="#" data-translate-key="Terminos">Términos</a></li>
                <li><a href="#" data-translate-key="Contacto">Contacto</a></li>
            </ul>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const languageToggle = document.getElementById('languageToggle');
            const htmlTag = document.documentElement;

            // Define las traducciones para esta página (checkout.html)
            const translations = {
                'es': {
                    'Inicio': 'Inicio',
                    'Cooks Map': 'Mapa de Cocineros',
                    'Reseñas': 'Reseñas',
                    'Cooks Profile': 'Mi Perfil',
                    'Iniciar Sesión': 'Iniciar Sesión',
                    'Regístrate': 'Regístrate',
                    'Pagar': 'Pagar',
                    'checkoutTitle': 'Tu Pedido',
                    'summaryTitle': 'Resumen del Pedido',
                    'item1Name': 'Lasaña Casera (x1)',
                    'item2Name': 'Tacos al Pastor (x2)',
                    'totalText': 'Total:',
                    'paymentTitle': 'Detalles de Pago',
                    'cardNameLabel': 'Nombre en la Tarjeta:',
                    'cardNumberLabel': 'Número de Tarjeta:',
                    'expiryDateLabel': 'Fecha de Vencimiento:',
                    'cvvLabel': 'CVV:',
                    'payButton': 'Pagar Ahora',
                    'paymentSuccess': '¡Pago exitoso! Gracias por tu compra.',
                    'paymentError': 'Error en el pago. Por favor, verifica tus datos e intenta de nuevo.',
                    'backToHomeButton': 'Volver al Inicio',
                    'Privacidad': 'Privacidad',
                    'Terminos': 'Términos',
                    'Contacto': 'Contacto'
                },
                'en': {
                    'Inicio': 'Home',
                    'Cooks Map': 'Cooks Map',
                    'Reseñas': 'Reviews',
                    'Cooks Profile': 'Cooks Profile',
                    'Iniciar Sesión': 'Log In',
                    'Regístrate': 'Sign Up',
                    'Pagar': 'Checkout',
                    'checkoutTitle': 'Your Order',
                    'summaryTitle': 'Order Summary',
                    'item1Name': 'Homemade Lasagna (x1)',
                    'item2Name': 'Tacos al Pastor (x2)',
                    'totalText': 'Total:',
                    'paymentTitle': 'Payment Details',
                    'cardNameLabel': 'Name on Card:',
                    'cardNumberLabel': 'Card Number:',
                    'expiryDateLabel': 'Expiry Date:',
                    'cvvLabel': 'CVV:',
                    'payButton': 'Pay Now',
                    'paymentSuccess': 'Payment successful! Thank you for your purchase.',
                    'paymentError': 'Payment error. Please check your details and try again.',
                    'backToHomeButton': 'Back to Home',
                    'Privacidad': 'Privacy',
                    'Terminos': 'Terms',
                    'Contacto': 'Contact'
                }
            };

            function applyTranslations(lang) {
                document.querySelectorAll('[data-translate-key]').forEach(element => {
                    const key = element.getAttribute('data-translate-key');
                    if (translations[lang][key]) {
                        if (element.tagName === 'A' && element.classList.contains('button') && key === 'Regístrate') {
                             element.textContent = translations[lang][key];
                        } else {
                            element.textContent = translations[lang][key];
                        }
                    }
                });

                for (const id in translations[lang]) {
                    const element = document.getElementById(id);
                    if (element && !element.hasAttribute('data-translate-key')) {
                        element.textContent = translations[lang][id];
                    }
                }
            }

            // **Persistencia de Idioma con localStorage**
            let currentLang = localStorage.getItem('userLang') || htmlTag.lang;
            htmlTag.lang = currentLang;

            languageToggle.textContent = (currentLang === 'es' ? 'ES / EN' : 'EN / ES');
            applyTranslations(currentLang);

            languageToggle.addEventListener('click', () => {
                if (currentLang === 'es') {
                    htmlTag.lang = 'en';
                    currentLang = 'en';
                    languageToggle.textContent = 'EN / ES';
                } else {
                    htmlTag.lang = 'es';
                    currentLang = 'es';
                    languageToggle.textContent = 'ES / EN';
                }
                applyTranslations(currentLang);
                localStorage.setItem('userLang', currentLang);
            });

            // Lógica del formulario de pago (simulación)
            const paymentForm = document.getElementById('paymentForm');
            const paymentMessageDiv = document.getElementById('payment-message');

            paymentForm.addEventListener('submit', (event) => {
                event.preventDefault(); // Evita el envío predeterminado del formulario

                const cardNumber = document.getElementById('card-number').value;
                const expiryDate = document.getElementById('expiry-date').value;
                const cvv = document.getElementById('cvv').value;

                // Simulación de validación de pago
                if (cardNumber === '1111222233334444' && expiryDate === '12/25' && cvv === '123') {
                    paymentMessageDiv.textContent = translations[currentLang]['paymentSuccess'];
                    paymentMessageDiv.className = 'form-message success';
                    // Redirigir o realizar otras acciones después del pago exitoso
                    // alert('¡Pago exitoso!');
                    // window.location.href = 'confirmation.html'; // Redirigir a una página de confirmación
                } else {
                    paymentMessageDiv.textContent = translations[currentLang]['paymentError'];
                    paymentMessageDiv.className = 'form-message error';
                }
            });
        });
    </script>
</body>
</html>