<!DOCTYPE html>
<html>
<head>
    <title>HomeBite - El Marketplace de la Comida Casera Local</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Estilos básicos para este ejemplo */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Asegura que ocupe al menos toda la altura de la ventana */
        }
        header {
            background-color: #f8f8f8;
            padding: 10px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        header .logo a {
            text-decoration: none;
            color: #333;
            font-weight: bold;
            font-size: 20px;
        }
        header nav a {
            margin-left: 15px;
            text-decoration: none;
            color: #007bff;
        }
        main#main-content-area {
            flex-grow: 1; /* Hace que ocupe todo el espacio disponible */
            padding: 20px;
            box-sizing: border-box; /* Incluye padding en el tamaño */
            overflow-y: auto; /* Permite scroll si el contenido es muy largo */
        }
    </style>

    <script>
        let map;
        let marker; // Variable para el marcador

        function initMap() {
            // Asegúrate de que el div #map existe antes de intentar inicializar el mapa
            const mapElement = document.getElementById("map");
            if (!mapElement) {
                console.error("El elemento con id 'map' no fue encontrado. El mapa no puede ser inicializado.");
                return;
            }

            // Coordenadas de Nueva York (centro aproximado)
            const newYork = { lat: 40.7128, lng: -74.0060 };

            // Opciones del mapa
            map = new google.maps.Map(mapElement, {
                center: newYork,
                zoom: 12, // Nivel de zoom inicial
                mapTypeId: "roadmap", // Tipo de mapa (roadmap, satellite, hybrid, terrain)
            });

            // Añadir un marcador en Nueva York
            marker = new google.maps.Marker({
                position: newYork,
                map: map,
                title: "Nueva York", // Título del marcador
            });

            console.log("Mapa de Google inicializado.");
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD5TId1SoPW0eOtIQ4vSj6NT-Z-IL1cBUw&callback=initMap"></script>
</head>
<body>
    <header>
        <div class="logo">
            <a href="#" onclick="loadContent('home-content.html'); return false;">HomeBite</a>
        </div>
        <nav>
            <a href="#" onclick="loadContent('home-content.html'); return false;">Home</a>
            <a href="#" onclick="loadContent('map.html'); return false;">Mapa</a>
            <a href="profile.html">Perfil</a> <a href="reviews.html">Reseñas</a> </nav>
    </header>

    <main id="main-content-area">
        <h2>Bienvenido a HomeBite</h2>
        <p>Explora la comida casera más deliciosa cerca de ti.</p>
        <p>Haz clic en "Mapa" para ver a los cocineros disponibles.</p>
    </main>

    <script>
        async function loadContent(page) {
            const contentArea = document.getElementById('main-content-area');
            if (!contentArea) {
                console.error("El elemento con id 'main-content-area' no fue encontrado.");
                return;
            }

            try {
                const response = await fetch(page);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const html = await response.text();
                contentArea.innerHTML = html;

                // Si la página cargada es 'map.html' y la API de Google Maps ya está disponible,
                // re-inicializamos el mapa.
                if (page === 'map.html' && typeof google !== 'undefined' && typeof initMap === 'function') {
                    // Es bueno añadir un pequeño retraso para asegurar que el DOM se haya actualizado
                    setTimeout(() => {
                        initMap();
                    }, 50);
                }

            } catch (error) {
                console.error("Error al cargar el contenido:", error);
                contentArea.innerHTML = "<p>Error al cargar la página.</p>";
            }
        }

        // Opcional: Cargar el mapa por defecto al cargar la página index.html
        // Si quieres que el mapa sea lo primero que se vea, descomenta la siguiente línea:
        // loadContent('map.html');
    </script>
</body>
</html>